# Agentic AI Research System - Configuration Example
# Copy this file to config.yaml and fill in your API keys

# LLM Configuration
llm:
  # Primary LLM provider (openai, gemini, or openrouter)
  primary: "openai"

  # Fallback order if primary fails
  fallback_order: ["gemini", "openrouter"]

  # OpenAI Configuration
  openai:
    api_key: "${OPENAI_API_KEY}"  # Set via environment variable
    model: "gpt-5-nano"  # Default: gpt-5-nano (GPT-5 Responses API); options: gpt-4.1-mini, gpt-5-mini, gpt-4o, gpt-4-turbo
    temperature: 0.7
    max_tokens: 2000

  # Google Gemini Configuration
  gemini:
    api_key: "${GOOGLE_API_KEY}"  # Set via environment variable
    model: "gemini-2.5-flash"  # Options: gemini-2.5-flash, gemini-1.5-pro
    temperature: 0.7
    max_tokens: 2000

  # OpenRouter Configuration (tool-capable, open-source models)
  openrouter:
    api_key: "${OPENROUTER_API_KEY}"  # Set via environment variable
    model: "openai/gpt-oss-safeguard-20b"  # Tool-capable default (small/safety)
    alternate_models:
      - "moonshotai/kimi-k2-thinking"      # Medium / deep reasoning
      - "openai/gpt-oss-120b"              # Large
    temperature: 0.7
    max_tokens: 2000

# Research Settings
research:
  max_iterations: 6  # Maximum ReAct iterations per session
  timeout_minutes: 15  # Session timeout
  parallel_tool_execution: false  # Execute tools in parallel (experimental)

# Tool Configuration
tools:
  # Web Search - Uses automatic provider failover: Tavily → Serper → SerpAPI
  # At least one search provider API key is recommended
  web_search_max_results: 10
  web_search_timeout_seconds: 90  # Total timeout across all providers

  # Search provider API keys (set via environment variables)
  tavily_api_key: "${TAVILY_API_KEY}"     # Primary (1000 free/month)
  serper_api_key: "${SERPER_API_KEY}"     # Secondary (2500 free)
  serpapi_api_key: "${SERPAPI_API_KEY}"   # Tertiary (100 free/month)

  # Content Pipeline
  use_content_pipeline: true  # Enable intelligent result processing
  pipeline_top_k: 10  # Number of top results to select
  pipeline_cache_ttl: 15  # Cache TTL in minutes

  # ArXiv Search
  arxiv_max_results: 20

  # GitHub Search
  github_max_results: 10
  github_token: "${GITHUB_TOKEN}"  # Optional, increases rate limit

  # PDF Processing
  pdf_max_pages: 50

# Evaluation Settings
evaluation:
  run_per_step: true  # Evaluate each iteration
  run_end_to_end: true  # Evaluate final output
  llm_as_judge: true  # Use LLM for evaluation

  # Enhanced Evaluation
  enable_hallucination_detection: true
  enable_contradiction_detection: true
  enable_confidence_scoring: true
  enable_quality_tier_classification: true

# Tracing & Observability
tracing:
  enabled: true
  provider: "custom"  # 'langsmith' or 'custom'

  # LangSmith Configuration (Optional)
  langsmith_api_key: "${LANGSMITH_API_KEY}"
  langsmith_project: "agentic-research"

  # Logging
  log_tool_outputs: true
  log_llm_calls: true
  log_level: "info"  # debug, info, warning, error

# Database Settings
database:
  url: "sqlite+aiosqlite:///./research.db"
  echo: false  # Set to true for SQL debugging

# API Server Settings
api:
  host: "0.0.0.0"
  port: 8000
  reload: true  # Auto-reload on code changes (development only)
  cors_origins:
    - "http://localhost:3000"
    - "http://localhost:3001"
  # For production, specify exact origins:
  # cors_origins:
  #   - "https://your-frontend-domain.com"

# Metrics Collection
metrics:
  enabled: true
  collect_tool_metrics: true
  collect_llm_metrics: true
  collect_source_metrics: true

# Export Settings
export:
  default_format: "markdown"
  include_metadata: true
  include_evaluation: true
  pdf_template: "default"

# Advanced Settings
advanced:
  # Content Processing
  max_content_length: 5000  # Max content length for summarization
  summary_length: 200  # Target summary length in words

  # Caching
  enable_redis: false  # Use Redis for distributed caching (requires Redis server)
  redis_url: "redis://localhost:6379"

  # Rate Limiting (Future)
  enable_rate_limiting: false
  requests_per_minute: 60

  # Security (Future)
  enable_api_key_auth: false
  require_https: false

# Environment-Specific Overrides
# These can be overridden via environment variables:
#
# OPENAI_API_KEY=sk-... python main.py
# GOOGLE_API_KEY=... python main.py
# LANGSMITH_API_KEY=... python main.py
# TAVILY_API_KEY=tvly-... python main.py
# SERPER_API_KEY=... python main.py
# SERPAPI_API_KEY=... python main.py
# GITHUB_TOKEN=... python main.py
