<svg width="1400" height="1000" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1400 1000">
  <defs>
    <!-- Gradients -->
    <linearGradient id="completed" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#10B981;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#059669;stop-opacity:1" />
    </linearGradient>

    <linearGradient id="active" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#6366F1;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#8B5CF6;stop-opacity:1" />
    </linearGradient>

    <linearGradient id="pending" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#E5E7EB;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#D1D5DB;stop-opacity:1" />
    </linearGradient>

    <linearGradient id="error" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#EF4444;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#DC2626;stop-opacity:1" />
    </linearGradient>

    <filter id="shadow">
      <feDropShadow dx="0" dy="2" stdDeviation="2" flood-opacity="0.2"/>
    </filter>
  </defs>

  <!-- Background -->
  <rect width="1400" height="1000" fill="#F9FAFB"/>

  <!-- Title -->
  <text x="700" y="40" font-family="Arial, sans-serif" font-size="24" font-weight="bold" fill="#1F2937" text-anchor="middle">
    Workflow States Demonstration
  </text>

  <!-- ============================================ -->
  <!-- STATE 1: Initial - First Iteration, Thinking -->
  <!-- ============================================ -->
  <g id="state1">
    <text x="50" y="90" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#374151">
      State 1: First Iteration - Thinking
    </text>

    <g transform="translate(0, 100)">
      <!-- Start (completed) -->
      <circle cx="80" cy="60" r="20" fill="url(#completed)" filter="url(#shadow)"/>
      <path d="M 75 60 L 78 65 L 87 54" stroke="white" stroke-width="2" fill="none" transform="translate(-4, 0)"/>
      <text x="80" y="88" font-family="Arial, sans-serif" font-size="9" fill="#6B7280" text-anchor="middle">Start</text>

      <!-- Line -->
      <line x1="100" y1="60" x2="140" y2="60" stroke="#10B981" stroke-width="2"/>

      <!-- Think (active) -->
      <circle cx="160" cy="60" r="20" fill="url(#active)" filter="url(#shadow)"/>
      <circle cx="160" cy="60" r="16" fill="white" opacity="0.3"/>
      <text x="160" y="88" font-family="Arial, sans-serif" font-size="9" fill="#6366F1" text-anchor="middle" font-weight="600">Think</text>

      <!-- Line -->
      <line x1="180" y1="60" x2="220" y2="60" stroke="#D1D5DB" stroke-width="2" stroke-dasharray="3,3"/>

      <!-- Act (pending) -->
      <circle cx="240" cy="60" r="20" fill="url(#pending)" filter="url(#shadow)"/>
      <text x="240" y="88" font-family="Arial, sans-serif" font-size="9" fill="#9CA3AF" text-anchor="middle">Act</text>

      <!-- Line -->
      <line x1="260" y1="60" x2="300" y2="60" stroke="#D1D5DB" stroke-width="2" stroke-dasharray="3,3"/>

      <!-- Execute (pending) -->
      <circle cx="320" cy="60" r="20" fill="url(#pending)" filter="url(#shadow)"/>
      <text x="320" y="88" font-family="Arial, sans-serif" font-size="9" fill="#9CA3AF" text-anchor="middle">Execute</text>

      <!-- Line -->
      <line x1="340" y1="60" x2="380" y2="60" stroke="#D1D5DB" stroke-width="2" stroke-dasharray="3,3"/>

      <!-- Observe (pending) -->
      <circle cx="400" cy="60" r="20" fill="url(#pending)" filter="url(#shadow)"/>
      <text x="400" y="88" font-family="Arial, sans-serif" font-size="9" fill="#9CA3AF" text-anchor="middle">Observe</text>

      <!-- Line -->
      <line x1="420" y1="60" x2="460" y2="60" stroke="#D1D5DB" stroke-width="2" stroke-dasharray="3,3"/>

      <!-- Evaluate (pending) -->
      <circle cx="480" cy="60" r="20" fill="url(#pending)" filter="url(#shadow)"/>
      <text x="480" y="88" font-family="Arial, sans-serif" font-size="9" fill="#9CA3AF" text-anchor="middle">Evaluate</text>

      <!-- Line -->
      <line x1="500" y1="60" x2="540" y2="60" stroke="#D1D5DB" stroke-width="2" stroke-dasharray="3,3"/>

      <!-- Finish (pending) -->
      <circle cx="560" cy="60" r="20" fill="url(#pending)" filter="url(#shadow)"/>
      <text x="560" y="88" font-family="Arial, sans-serif" font-size="9" fill="#9CA3AF" text-anchor="middle">Finish</text>

      <!-- Iteration badge -->
      <rect x="590" y="45" width="60" height="30" rx="15" fill="url(#active)" filter="url(#shadow)"/>
      <text x="620" y="63" font-family="Arial, sans-serif" font-size="11" fill="white" text-anchor="middle" font-weight="600">1 / 10</text>
    </g>
  </g>

  <!-- ============================================ -->
  <!-- STATE 2: Mid-Research - Executing Tool -->
  <!-- ============================================ -->
  <g id="state2">
    <text x="50" y="240" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#374151">
      State 2: Iteration 3 - Executing web_search
    </text>

    <g transform="translate(0, 250)">
      <!-- Start (completed) -->
      <circle cx="80" cy="60" r="20" fill="url(#completed)" filter="url(#shadow)"/>
      <path d="M 75 60 L 78 65 L 87 54" stroke="white" stroke-width="2" fill="none" transform="translate(-4, 0)"/>
      <text x="80" y="88" font-family="Arial, sans-serif" font-size="9" fill="#6B7280" text-anchor="middle">Start</text>

      <!-- Line -->
      <line x1="100" y1="60" x2="140" y2="60" stroke="#10B981" stroke-width="2"/>

      <!-- Think (completed) -->
      <circle cx="160" cy="60" r="20" fill="url(#completed)" filter="url(#shadow)"/>
      <path d="M 155 60 L 158 65 L 167 54" stroke="white" stroke-width="2" fill="none" transform="translate(-4, 0)"/>
      <text x="160" y="88" font-family="Arial, sans-serif" font-size="9" fill="#6B7280" text-anchor="middle">Think</text>

      <!-- Line -->
      <line x1="180" y1="60" x2="220" y2="60" stroke="#10B981" stroke-width="2"/>

      <!-- Act (completed) -->
      <circle cx="240" cy="60" r="20" fill="url(#completed)" filter="url(#shadow)"/>
      <path d="M 235 60 L 238 65 L 247 54" stroke="white" stroke-width="2" fill="none" transform="translate(-4, 0)"/>
      <text x="240" y="88" font-family="Arial, sans-serif" font-size="9" fill="#6B7280" text-anchor="middle">Act</text>

      <!-- Line (active flow) -->
      <line x1="260" y1="60" x2="300" y2="60" stroke="#6366F1" stroke-width="2"/>

      <!-- Execute (active with gear) -->
      <circle cx="320" cy="60" r="20" fill="url(#active)" filter="url(#shadow)"/>
      <circle cx="320" cy="60" r="16" fill="white" opacity="0.3"/>
      <g transform="translate(320, 60)">
        <circle r="5" fill="none" stroke="white" stroke-width="1.5"/>
        <rect x="-1" y="-8" width="2" height="3" fill="white"/>
        <rect x="-1" y="5" width="2" height="3" fill="white"/>
        <rect x="-8" y="-1" width="3" height="2" fill="white"/>
        <rect x="5" y="-1" width="3" height="2" fill="white"/>
      </g>
      <text x="320" y="88" font-family="Arial, sans-serif" font-size="9" fill="#6366F1" text-anchor="middle" font-weight="600">Execute</text>
      <!-- Tool badge -->
      <rect x="285" y="25" width="70" height="16" rx="8" fill="#6366F1"/>
      <text x="320" y="36" font-family="Arial, sans-serif" font-size="8" fill="white" text-anchor="middle" font-weight="600">web_search</text>

      <!-- Line -->
      <line x1="340" y1="60" x2="380" y2="60" stroke="#D1D5DB" stroke-width="2" stroke-dasharray="3,3"/>

      <!-- Observe (pending) -->
      <circle cx="400" cy="60" r="20" fill="url(#pending)" filter="url(#shadow)"/>
      <text x="400" y="88" font-family="Arial, sans-serif" font-size="9" fill="#9CA3AF" text-anchor="middle">Observe</text>

      <!-- Line -->
      <line x1="420" y1="60" x2="460" y2="60" stroke="#D1D5DB" stroke-width="2" stroke-dasharray="3,3"/>

      <!-- Evaluate (pending) -->
      <circle cx="480" cy="60" r="20" fill="url(#pending)" filter="url(#shadow)"/>
      <text x="480" y="88" font-family="Arial, sans-serif" font-size="9" fill="#9CA3AF" text-anchor="middle">Evaluate</text>

      <!-- Line -->
      <line x1="500" y1="60" x2="540" y2="60" stroke="#D1D5DB" stroke-width="2" stroke-dasharray="3,3"/>

      <!-- Finish (pending) -->
      <circle cx="560" cy="60" r="20" fill="url(#pending)" filter="url(#shadow)"/>
      <text x="560" y="88" font-family="Arial, sans-serif" font-size="9" fill="#9CA3AF" text-anchor="middle">Finish</text>

      <!-- Loop arc (visible) -->
      <path d="M 480 30 Q 320 5 160 30" fill="none" stroke="#10B981" stroke-width="2" stroke-dasharray="6,3" opacity="0.6"/>
      <text x="320" y="10" font-family="Arial, sans-serif" font-size="9" fill="#059669" text-anchor="middle">↻ Iterate (2 loops)</text>

      <!-- Iteration badge -->
      <rect x="590" y="45" width="60" height="30" rx="15" fill="url(#active)" filter="url(#shadow)"/>
      <text x="620" y="63" font-family="Arial, sans-serif" font-size="11" fill="white" text-anchor="middle" font-weight="600">3 / 10</text>
    </g>
  </g>

  <!-- ============================================ -->
  <!-- STATE 3: Evaluating - Decision Point -->
  <!-- ============================================ -->
  <g id="state3">
    <text x="50" y="390" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#374151">
      State 3: Iteration 4 - Evaluating (Finish Guard)
    </text>

    <g transform="translate(0, 400)">
      <!-- Start through Observe (all completed) -->
      <circle cx="80" cy="60" r="20" fill="url(#completed)" filter="url(#shadow)"/>
      <path d="M 75 60 L 78 65 L 87 54" stroke="white" stroke-width="2" fill="none" transform="translate(-4, 0)"/>
      <text x="80" y="88" font-family="Arial, sans-serif" font-size="9" fill="#6B7280" text-anchor="middle">Start</text>

      <line x1="100" y1="60" x2="140" y2="60" stroke="#10B981" stroke-width="2"/>

      <circle cx="160" cy="60" r="20" fill="url(#completed)" filter="url(#shadow)"/>
      <path d="M 155 60 L 158 65 L 167 54" stroke="white" stroke-width="2" fill="none" transform="translate(-4, 0)"/>
      <text x="160" y="88" font-family="Arial, sans-serif" font-size="9" fill="#6B7280" text-anchor="middle">Think</text>

      <line x1="180" y1="60" x2="220" y2="60" stroke="#10B981" stroke-width="2"/>

      <circle cx="240" cy="60" r="20" fill="url(#completed)" filter="url(#shadow)"/>
      <path d="M 235 60 L 238 65 L 247 54" stroke="white" stroke-width="2" fill="none" transform="translate(-4, 0)"/>
      <text x="240" y="88" font-family="Arial, sans-serif" font-size="9" fill="#6B7280" text-anchor="middle">Act</text>

      <line x1="260" y1="60" x2="300" y2="60" stroke="#10B981" stroke-width="2"/>

      <circle cx="320" cy="60" r="20" fill="url(#completed)" filter="url(#shadow)"/>
      <path d="M 315 60 L 318 65 L 327 54" stroke="white" stroke-width="2" fill="none" transform="translate(-4, 0)"/>
      <text x="320" y="88" font-family="Arial, sans-serif" font-size="9" fill="#6B7280" text-anchor="middle">Execute</text>

      <line x1="340" y1="60" x2="380" y2="60" stroke="#10B981" stroke-width="2"/>

      <circle cx="400" cy="60" r="20" fill="url(#completed)" filter="url(#shadow)"/>
      <path d="M 395 60 L 398 65 L 407 54" stroke="white" stroke-width="2" fill="none" transform="translate(-4, 0)"/>
      <text x="400" y="88" font-family="Arial, sans-serif" font-size="9" fill="#6B7280" text-anchor="middle">Observe</text>

      <!-- Line -->
      <line x1="420" y1="60" x2="460" y2="60" stroke="#6366F1" stroke-width="2"/>

      <!-- Evaluate (active) - Decision diamond -->
      <circle cx="480" cy="60" r="20" fill="url(#active)" filter="url(#shadow)"/>
      <circle cx="480" cy="60" r="16" fill="white" opacity="0.3"/>
      <path d="M 480 50 L 488 60 L 480 70 L 472 60 Z" fill="none" stroke="white" stroke-width="1.5"/>
      <text x="480" y="88" font-family="Arial, sans-serif" font-size="9" fill="#6366F1" text-anchor="middle" font-weight="600">Evaluate</text>

      <!-- Line -->
      <line x1="500" y1="60" x2="540" y2="60" stroke="#D1D5DB" stroke-width="2" stroke-dasharray="3,3"/>

      <!-- Finish (pending) -->
      <circle cx="560" cy="60" r="20" fill="url(#pending)" filter="url(#shadow)"/>
      <text x="560" y="88" font-family="Arial, sans-serif" font-size="9" fill="#9CA3AF" text-anchor="middle">Finish</text>

      <!-- Loop arc (active - about to loop) -->
      <path d="M 480 30 Q 320 5 160 30" fill="none" stroke="#6366F1" stroke-width="2.5" stroke-dasharray="6,3"/>
      <polygon points="155,30 160,23 165,30" fill="#6366F1" transform="rotate(-45 160 30)"/>
      <text x="320" y="10" font-family="Arial, sans-serif" font-size="9" fill="#4F46E5" text-anchor="middle" font-weight="600">↻ Need more info</text>

      <!-- Iteration badge -->
      <rect x="590" y="45" width="60" height="30" rx="15" fill="url(#active)" filter="url(#shadow)"/>
      <text x="620" y="63" font-family="Arial, sans-serif" font-size="11" fill="white" text-anchor="middle" font-weight="600">4 / 10</text>
    </g>
  </g>

  <!-- ============================================ -->
  <!-- STATE 4: Final - Report Complete -->
  <!-- ============================================ -->
  <g id="state4">
    <text x="50" y="540" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#374151">
      State 4: Iteration 5 - Research Complete
    </text>

    <g transform="translate(0, 550)">
      <!-- All completed! -->
      <circle cx="80" cy="60" r="20" fill="url(#completed)" filter="url(#shadow)"/>
      <path d="M 75 60 L 78 65 L 87 54" stroke="white" stroke-width="2" fill="none" transform="translate(-4, 0)"/>
      <text x="80" y="88" font-family="Arial, sans-serif" font-size="9" fill="#6B7280" text-anchor="middle">Start</text>

      <line x1="100" y1="60" x2="140" y2="60" stroke="#10B981" stroke-width="2"/>

      <circle cx="160" cy="60" r="20" fill="url(#completed)" filter="url(#shadow)"/>
      <path d="M 155 60 L 158 65 L 167 54" stroke="white" stroke-width="2" fill="none" transform="translate(-4, 0)"/>
      <text x="160" y="88" font-family="Arial, sans-serif" font-size="9" fill="#6B7280" text-anchor="middle">Think</text>

      <line x1="180" y1="60" x2="220" y2="60" stroke="#10B981" stroke-width="2"/>

      <circle cx="240" cy="60" r="20" fill="url(#completed)" filter="url(#shadow)"/>
      <path d="M 235 60 L 238 65 L 247 54" stroke="white" stroke-width="2" fill="none" transform="translate(-4, 0)"/>
      <text x="240" y="88" font-family="Arial, sans-serif" font-size="9" fill="#6B7280" text-anchor="middle">Act</text>

      <line x1="260" y1="60" x2="300" y2="60" stroke="#10B981" stroke-width="2"/>

      <circle cx="320" cy="60" r="20" fill="url(#completed)" filter="url(#shadow)"/>
      <path d="M 315 60 L 318 65 L 327 54" stroke="white" stroke-width="2" fill="none" transform="translate(-4, 0)"/>
      <text x="320" y="88" font-family="Arial, sans-serif" font-size="9" fill="#6B7280" text-anchor="middle">Execute</text>

      <line x1="340" y1="60" x2="380" y2="60" stroke="#10B981" stroke-width="2"/>

      <circle cx="400" cy="60" r="20" fill="url(#completed)" filter="url(#shadow)"/>
      <path d="M 395 60 L 398 65 L 407 54" stroke="white" stroke-width="2" fill="none" transform="translate(-4, 0)"/>
      <text x="400" y="88" font-family="Arial, sans-serif" font-size="9" fill="#6B7280" text-anchor="middle">Observe</text>

      <line x1="420" y1="60" x2="460" y2="60" stroke="#10B981" stroke-width="2"/>

      <circle cx="480" cy="60" r="20" fill="url(#completed)" filter="url(#shadow)"/>
      <path d="M 475 60 L 478 65 L 487 54" stroke="white" stroke-width="2" fill="none" transform="translate(-4, 0)"/>
      <text x="480" y="88" font-family="Arial, sans-serif" font-size="9" fill="#6B7280" text-anchor="middle">Evaluate</text>

      <line x1="500" y1="60" x2="540" y2="60" stroke="#10B981" stroke-width="2"/>

      <!-- Finish (completed with emphasis) -->
      <circle cx="560" cy="60" r="20" fill="url(#completed)" filter="url(#shadow)"/>
      <circle cx="560" cy="60" r="16" fill="white" opacity="0.3"/>
      <!-- Flag icon -->
      <path d="M 553 53 L 553 70 M 553 53 L 567 58 L 553 63" fill="#047857" stroke="#047857" stroke-width="1.5"/>
      <text x="560" y="88" font-family="Arial, sans-serif" font-size="9" fill="#059669" text-anchor="middle" font-weight="600">Finish ✓</text>

      <!-- Success badge -->
      <rect x="580" y="45" width="100" height="30" rx="15" fill="url(#completed)" filter="url(#shadow)"/>
      <text x="630" y="63" font-family="Arial, sans-serif" font-size="11" fill="white" text-anchor="middle" font-weight="600">✓ Complete</text>
    </g>
  </g>

  <!-- ============================================ -->
  <!-- STATE 5: Error - Tool Execution Failed -->
  <!-- ============================================ -->
  <g id="state5">
    <text x="50" y="690" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#374151">
      State 5: Error - Tool Execution Timeout
    </text>

    <g transform="translate(0, 700)">
      <!-- Start through Act (completed) -->
      <circle cx="80" cy="60" r="20" fill="url(#completed)" filter="url(#shadow)"/>
      <path d="M 75 60 L 78 65 L 87 54" stroke="white" stroke-width="2" fill="none" transform="translate(-4, 0)"/>
      <text x="80" y="88" font-family="Arial, sans-serif" font-size="9" fill="#6B7280" text-anchor="middle">Start</text>

      <line x1="100" y1="60" x2="140" y2="60" stroke="#10B981" stroke-width="2"/>

      <circle cx="160" cy="60" r="20" fill="url(#completed)" filter="url(#shadow)"/>
      <path d="M 155 60 L 158 65 L 167 54" stroke="white" stroke-width="2" fill="none" transform="translate(-4, 0)"/>
      <text x="160" y="88" font-family="Arial, sans-serif" font-size="9" fill="#6B7280" text-anchor="middle">Think</text>

      <line x1="180" y1="60" x2="220" y2="60" stroke="#10B981" stroke-width="2"/>

      <circle cx="240" cy="60" r="20" fill="url(#completed)" filter="url(#shadow)"/>
      <path d="M 235 60 L 238 65 L 247 54" stroke="white" stroke-width="2" fill="none" transform="translate(-4, 0)"/>
      <text x="240" y="88" font-family="Arial, sans-serif" font-size="9" fill="#6B7280" text-anchor="middle">Act</text>

      <!-- Line (error) -->
      <line x1="260" y1="60" x2="300" y2="60" stroke="#EF4444" stroke-width="2"/>

      <!-- Execute (error) -->
      <circle cx="320" cy="60" r="20" fill="url(#error)" filter="url(#shadow)"/>
      <circle cx="320" cy="60" r="16" fill="white" opacity="0.3"/>
      <!-- X icon -->
      <path d="M 313 53 L 327 67 M 327 53 L 313 67" stroke="white" stroke-width="2" stroke-linecap="round"/>
      <text x="320" y="88" font-family="Arial, sans-serif" font-size="9" fill="#DC2626" text-anchor="middle" font-weight="600">Execute</text>
      <!-- Error badge -->
      <rect x="285" y="25" width="70" height="16" rx="8" fill="#DC2626"/>
      <text x="320" y="36" font-family="Arial, sans-serif" font-size="8" fill="white" text-anchor="middle" font-weight="600">Timeout</text>

      <!-- Line (dashed error) -->
      <line x1="340" y1="60" x2="380" y2="60" stroke="#EF4444" stroke-width="2" stroke-dasharray="3,3"/>

      <!-- Observe through Finish (disabled/pending) -->
      <circle cx="400" cy="60" r="20" fill="url(#pending)" filter="url(#shadow)" opacity="0.5"/>
      <text x="400" y="88" font-family="Arial, sans-serif" font-size="9" fill="#9CA3AF" text-anchor="middle">Observe</text>

      <line x1="420" y1="60" x2="460" y2="60" stroke="#D1D5DB" stroke-width="2" stroke-dasharray="3,3" opacity="0.5"/>

      <circle cx="480" cy="60" r="20" fill="url(#pending)" filter="url(#shadow)" opacity="0.5"/>
      <text x="480" y="88" font-family="Arial, sans-serif" font-size="9" fill="#9CA3AF" text-anchor="middle">Evaluate</text>

      <line x1="500" y1="60" x2="540" y2="60" stroke="#D1D5DB" stroke-width="2" stroke-dasharray="3,3" opacity="0.5"/>

      <circle cx="560" cy="60" r="20" fill="url(#pending)" filter="url(#shadow)" opacity="0.5"/>
      <text x="560" y="88" font-family="Arial, sans-serif" font-size="9" fill="#9CA3AF" text-anchor="middle">Finish</text>

      <!-- Error badge -->
      <rect x="590" y="45" width="70" height="30" rx="15" fill="url(#error)" filter="url(#shadow)"/>
      <text x="625" y="63" font-family="Arial, sans-serif" font-size="11" fill="white" text-anchor="middle" font-weight="600">✗ Error</text>
    </g>
  </g>

  <!-- ============================================ -->
  <!-- STATE 6: Responsive Mobile View (Vertical) -->
  <!-- ============================================ -->
  <g id="state6">
    <text x="750" y="90" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#374151">
      State 6: Mobile/Vertical Layout
    </text>

    <g transform="translate(800, 120)">
      <!-- Vertical stack -->
      <circle cx="80" cy="30" r="18" fill="url(#completed)" filter="url(#shadow)"/>
      <path d="M 75 30 L 78 35 L 87 24" stroke="white" stroke-width="2" fill="none" transform="translate(-4, 0)"/>
      <text x="110" y="35" font-family="Arial, sans-serif" font-size="10" fill="#6B7280">Start</text>

      <line x1="80" y1="48" x2="80" y2="72" stroke="#10B981" stroke-width="2"/>
      <polygon points="80,72 76,64 84,64" fill="#10B981"/>

      <circle cx="80" cy="90" r="18" fill="url(#completed)" filter="url(#shadow)"/>
      <path d="M 75 90 L 78 95 L 87 84" stroke="white" stroke-width="2" fill="none" transform="translate(-4, 0)"/>
      <text x="110" y="95" font-family="Arial, sans-serif" font-size="10" fill="#6B7280">Think</text>

      <line x1="80" y1="108" x2="80" y2="132" stroke="#10B981" stroke-width="2"/>
      <polygon points="80,132 76,124 84,124" fill="#10B981"/>

      <circle cx="80" cy="150" r="18" fill="url(#active)" filter="url(#shadow)"/>
      <circle cx="80" cy="150" r="14" fill="white" opacity="0.3"/>
      <text x="110" y="155" font-family="Arial, sans-serif" font-size="10" fill="#6366F1" font-weight="600">Act</text>

      <line x1="80" y1="168" x2="80" y2="192" stroke="#D1D5DB" stroke-width="2" stroke-dasharray="3,3"/>
      <polygon points="80,192 76,184 84,184" fill="#D1D5DB"/>

      <circle cx="80" cy="210" r="18" fill="url(#pending)" filter="url(#shadow)"/>
      <text x="110" y="215" font-family="Arial, sans-serif" font-size="10" fill="#9CA3AF">Execute</text>

      <text x="80" y="245" font-family="Arial, sans-serif" font-size="9" fill="#9CA3AF" text-anchor="middle">...</text>

      <!-- Loop back arc -->
      <path d="M 62 210 Q 30 150 62 90" fill="none" stroke="#10B981" stroke-width="2" stroke-dasharray="4,2" opacity="0.6"/>
      <text x="20" y="150" font-family="Arial, sans-serif" font-size="8" fill="#059669" transform="rotate(-90 20 150)">Iterate</text>

      <text x="80" y="270" font-family="Arial, sans-serif" font-size="9" fill="#6B7280" text-anchor="middle" font-style="italic">
        Compact for mobile
      </text>
    </g>
  </g>

  <!-- ============================================ -->
  <!-- Visual Elements Key -->
  <!-- ============================================ -->
  <g transform="translate(750, 400)">
    <text x="0" y="0" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#374151">
      Visual Elements Guide
    </text>

    <g transform="translate(0, 20)">
      <text x="0" y="0" font-family="Arial, sans-serif" font-size="11" fill="#6B7280" font-weight="600">Node States:</text>

      <circle cx="15" cy="25" r="12" fill="url(#completed)"/>
      <path d="M 10 25 L 13 30 L 22 19" stroke="white" stroke-width="2" fill="none" transform="translate(-4, 0)"/>
      <text x="35" y="30" font-family="Arial, sans-serif" font-size="10" fill="#374151">Completed (green + checkmark)</text>

      <circle cx="15" cy="55" r="12" fill="url(#active)"/>
      <circle cx="15" cy="55" r="9" fill="white" opacity="0.3"/>
      <text x="35" y="60" font-family="Arial, sans-serif" font-size="10" fill="#374151">Active (blue + pulsing)</text>

      <circle cx="15" cy="85" r="12" fill="url(#pending)"/>
      <text x="35" y="90" font-family="Arial, sans-serif" font-size="10" fill="#374151">Pending (gray, faded)</text>

      <circle cx="15" cy="115" r="12" fill="url(#error)"/>
      <path d="M 8 108 L 22 122 M 22 108 L 8 122" stroke="white" stroke-width="2" stroke-linecap="round"/>
      <text x="35" y="120" font-family="Arial, sans-serif" font-size="10" fill="#374151">Error (red + X)</text>
    </g>

    <g transform="translate(0, 160)">
      <text x="0" y="0" font-family="Arial, sans-serif" font-size="11" fill="#6B7280" font-weight="600">Connections:</text>

      <line x1="0" y1="25" x2="80" y2="25" stroke="#10B981" stroke-width="3"/>
      <text x="90" y="29" font-family="Arial, sans-serif" font-size="10" fill="#374151">Completed (solid green)</text>

      <line x1="0" y1="45" x2="80" y2="45" stroke="#6366F1" stroke-width="3"/>
      <text x="90" y="49" font-family="Arial, sans-serif" font-size="10" fill="#374151">Active (solid blue, animated)</text>

      <line x1="0" y1="65" x2="80" y2="65" stroke="#D1D5DB" stroke-width="3" stroke-dasharray="5,5"/>
      <text x="90" y="69" font-family="Arial, sans-serif" font-size="10" fill="#374151">Pending (dashed gray)</text>

      <path d="M 0 85 Q 40 70 80 85" fill="none" stroke="#10B981" stroke-width="2" stroke-dasharray="6,3"/>
      <text x="90" y="89" font-family="Arial, sans-serif" font-size="10" fill="#374151">Loop arc (dashed curve)</text>
    </g>

    <g transform="translate(0, 270)">
      <text x="0" y="0" font-family="Arial, sans-serif" font-size="11" fill="#6B7280" font-weight="600">Animations:</text>
      <text x="0" y="20" font-family="Arial, sans-serif" font-size="9" fill="#374151">• Pulsing scale on active nodes</text>
      <text x="0" y="35" font-family="Arial, sans-serif" font-size="9" fill="#374151">• Rotating gear on Execute</text>
      <text x="0" y="50" font-family="Arial, sans-serif" font-size="9" fill="#374151">• Flowing particles on active lines</text>
      <text x="0" y="65" font-family="Arial, sans-serif" font-size="9" fill="#374151">• Dash animation on loop arc</text>
      <text x="0" y="80" font-family="Arial, sans-serif" font-size="9" fill="#374151">• Gradient shift on active nodes</text>
      <text x="0" y="95" font-family="Arial, sans-serif" font-size="9" fill="#374151">• Glow effect on current stage</text>
    </g>
  </g>

  <!-- Footer note -->
  <text x="700" y="980" font-family="Arial, sans-serif" font-size="11" fill="#9CA3AF" text-anchor="middle" font-style="italic">
    Design v1.0 - All states showing different phases of research workflow
  </text>
</svg>
